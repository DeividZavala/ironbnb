(this["webpackJsonpironbnb-front"]=this["webpackJsonpironbnb-front"]||[]).push([[0],{37:function(e,t,a){e.exports=a(68)},42:function(e,t,a){},47:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),c=a.n(l),o=(a(42),a(10)),s=a(6),i=a(7),u=a(8),m=a(9),d=a(2),p=function(e){var t=e.user,a=e.logout;return r.a.createElement("header",null,r.a.createElement("nav",{className:"uk-navbar-container","uk-navbar":"true"},t._id?r.a.createElement("div",{className:"uk-navbar-left"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",{className:"uk-active"},r.a.createElement(d.b,{to:"/"},"Ironbnb")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/property/new"},"New Property")))):null,r.a.createElement("div",{className:"uk-navbar-right"},r.a.createElement("ul",{className:"uk-navbar-nav"},t._id?r.a.createElement("li",null,r.a.createElement(d.b,{to:"/profile"},r.a.createElement("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"true"},r.a.createElement("div",{className:"uk-width-auto"},r.a.createElement("img",{className:"uk-border-circle",width:"40",height:"40",alt:t.name,src:t.profile_picture})),r.a.createElement("div",{className:"uk-width-expand"},r.a.createElement("div",{className:"uk-margin-remove-bottom"},t.name)))),r.a.createElement("div",{className:"uk-navbar-dropdown"},r.a.createElement("ul",{className:"uk-nav uk-navbar-dropdown-nav"},r.a.createElement("li",{onClick:a},"Logout")))):r.a.createElement("li",null,r.a.createElement(d.b,{to:"/login"},"Login"))))))},h=(a(47),a(11)),v=a(12),k=a(4),g=a.n(k);g.a.defaults.withCredentials=!0;var E=function(e){return g.a.post("http://localhost:3000/users/login",e)},b=function(e){return g.a.post("http://localhost:3000/users/signup",e)},f=function(){return g.a.post("http://localhost:3000/users/logout")},y=a(13),N=a.n(y),C=Object(n.createContext)(),w=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:{}},e.handleChange=function(t){var a=e.state.user;a=Object(o.a)({},a,Object(v.a)({},t.target.name,t.target.value)),e.setState({user:a})},e.handleSubmit=function(t){t.preventDefault();var a="/login"===e.props.location.pathname,n=e.context.setUser,r=e.state.user,l=a?E:b,c=e.props.history,o=a?"/":"/login";l(r).then((function(e){if(a){var t=e.data.user;localStorage.setItem("user",JSON.stringify(t)),n(t)}c.push(o)})).catch((function(e){N.a.notification({message:"<span uk-icon='icon: close'></span> ".concat(e.response.data.msg),status:"danger",pos:"top-right"})}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e="/login"===this.props.location.pathname;return r.a.createElement("section",{className:"uk-section"},r.a.createElement("div",{className:"uk-container uk-flex uk-flex-center"},r.a.createElement("div",{className:"uk-width-1-4"},r.a.createElement("h3",null,e?"Login":"Signup"),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"uk-width-1-1 uk-form-stacked uk-flex uk-flex-center uk-flex-column"},r.a.createElement("div",{className:"uk-margin"},r.a.createElement("label",{className:"uk-form-label",htmlFor:"email"},"Email:"),r.a.createElement("div",{className:"uk-inline"},r.a.createElement("span",{className:"uk-form-icon uk-form-icon-flip","uk-icon":"icon: mail"}),r.a.createElement("input",{onChange:this.handleChange,id:"email",name:"email",className:"uk-input",type:"email",required:!0})),r.a.createElement("div",{className:"uk-margin"},r.a.createElement("label",{className:"uk-form-label",htmlFor:"password"},"Password:"),r.a.createElement("div",{className:"uk-inline"},r.a.createElement("span",{className:"uk-form-icon uk-form-icon-flip","uk-icon":"icon: lock"}),r.a.createElement("input",{onChange:this.handleChange,id:"password",name:"password",className:"uk-input",type:"password",required:!0})))),e?r.a.createElement("div",{className:"uk-text-meta"},"A\xfan no tienes cuenta?"," ",r.a.createElement(d.b,{className:"uk-text-primary",to:"/signup"},"Crear cuenta")):null,r.a.createElement("button",{className:"uk-button uk-button-primary"},e?"Login":"Signup")))))}}]),a}(n.Component);w.contextType=C;var x=w,O=function(e){var t=e.images;return r.a.createElement("div",{className:"uk-position-relative uk-visible-toggle uk-light","uk-slideshow":"animation: fade;ratio: 2:2;max-height: 500"},r.a.createElement("ul",{className:"uk-slideshow-items"},t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("img",{src:e,alt:"","uk-cover":"true"}))}))),r.a.createElement("a",{className:"uk-position-center-left uk-position-small uk-hidden-hover",href:"#","uk-slidenav-previous":"true","uk-slideshow-item":"previous"}),r.a.createElement("a",{className:"uk-position-center-right uk-position-small uk-hidden-hover",href:"#","uk-slidenav-next":"true","uk-slideshow-item":"next"}),r.a.createElement("div",{className:"uk-position-bottom-center uk-position-small"},r.a.createElement("ul",{className:"uk-dotnav"},t.map((function(e,t){return r.a.createElement("li",{key:t,"uk-slideshow-item":t},r.a.createElement("a",{href:"#"},"Item 1"))})))))},j=a(15),S=a.n(j),P=a(34),I=a.n(P),_=a(36),A=function(e){var t=e.name,a=e.type,n=void 0===a?"text":a,l=e.handleChange,c=e.placeholder,o=Object(_.a)(e,["name","type","handleChange","placeholder"]);return r.a.createElement("div",{className:"uk-margin"},r.a.createElement("label",{className:"uk-form-label uk-text-capitalize",htmlFor:t},t,":"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("input",Object.assign({onChange:l,name:t,className:"uk-input",id:t,type:n,placeholder:c},o))))};g.a.defaults.withCredentials=!0;var D=function(e){return g.a.post("http://localhost:3000/reservations",e)},F=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={reservation:{}},e.handleChange=function(t){var a=e.state.reservation;a=Object(o.a)({},a,Object(v.a)({},t.target.name,t.target.value)),e.setState({reservation:a})},e.handleSubmit=function(){var t=e.state.reservation,a=e.props.property;D(Object(o.a)({},t,{property:a})).then((function(e){console.log(e.data)}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.property;return r.a.createElement("div",{id:"reservate-".concat(a),"uk-modal":"true"},r.a.createElement("div",{className:"uk-modal-dialog uk-modal-body"},r.a.createElement("h2",{className:"uk-modal-title"},"Reservate ",t),r.a.createElement("form",null,r.a.createElement(A,{name:"guest_number",type:"number",min:"1",handleChange:this.handleChange,placeholder:"Guest number"}),r.a.createElement(A,{name:"checkin",handleChange:this.handleChange,type:"date",placeholder:"Checkin Date"}),r.a.createElement(A,{name:"checkout",type:"date",handleChange:this.handleChange,placeholder:"Checkout Date"})),r.a.createElement("p",{className:"uk-text-right"},r.a.createElement("button",{className:"uk-button uk-button-default uk-modal-close",type:"button"},"Cancel"),r.a.createElement("button",{onClick:this.handleSubmit,className:"uk-button uk-button-primary",type:"button"},"Save"))))}}]),a}(n.Component);a(66);S.a.extend(I.a);var J=function(e){var t=e._id,a=e.images,n=void 0===a?[]:a,l=e.title,c=e.description,o=e.price,s=e.capacity,i=e.createdAt,u=e.owner,m=e.userId,p=e.isDemo,h=void 0!==p&&p,v=m===(null===u||void 0===u?void 0:u._id);return r.a.createElement("div",{className:"uk-margin-small-bottom"},r.a.createElement(F,{title:l,property:t}),r.a.createElement("div",{className:"uk-card uk-card-default"},h?null:r.a.createElement("div",{className:"uk-card-header uk-padding-small"},r.a.createElement("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"true"},r.a.createElement("div",{className:"uk-width-auto"},r.a.createElement("img",{className:"uk-border-circle",width:"40",height:"40",alt:null===u||void 0===u?void 0:u.name,src:null===u||void 0===u?void 0:u.profile_picture})),r.a.createElement("div",{className:"uk-width-expand"},r.a.createElement("h3",{className:"uk-card-title uk-margin-remove-bottom"},null===u||void 0===u?void 0:u.name),r.a.createElement("p",{className:"uk-text-meta uk-margin-remove-top"},"Propietario")),v?r.a.createElement("div",null,r.a.createElement(d.b,{to:"/property/".concat(t),className:"uk-button uk-button-text"},"Editar")):null)),r.a.createElement("div",{className:"uk-card-media-top"},r.a.createElement(O,{images:n})),r.a.createElement("div",{className:"uk-card-body uk-padding-small"},r.a.createElement("h3",{className:"uk-card-title uk-text-center"},r.a.createElement(d.b,{to:"/property/".concat(t),className:"uk-button uk-button-text uk-text-lead"},l)),r.a.createElement("div",null,"Precio por noche: ",o),r.a.createElement("div",null,"Capacidad: ",s," personas"),r.a.createElement("div",null,"Creada ",S()(i).locale("es").fromNow()),r.a.createElement("p",null,c),r.a.createElement("div",{className:"uk-text-center"},r.a.createElement("button",{disabled:h,className:"uk-button uk-button-primary","uk-toggle":"target: #reservate-".concat(t)},"Reservar")))))};g.a.defaults.withCredentials=!0;var L=function(e){return g.a.post("http://localhost:3000/properties",e)},U=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.context.state.properties.length<1&&g.a.get("http://localhost:3000/properties").then((function(t){var a=t.data.result;(0,e.context.setProperties)(a)}))}},{key:"render",value:function(){var e=this.context.state,t=e.properties,a=e.user;return r.a.createElement("div",{className:"uk-section"},r.a.createElement("div",{className:"uk-container"},r.a.createElement("div",{className:"uk-grid uk-grid-small uk-grid-match uk-child-width-1-3@l  uk-child-width-1-3@m uk-child-width-1-1@s"},t.map((function(e,t){return r.a.createElement(J,Object.assign({key:t},e,{userId:a._id}))})))))}}]),a}(n.Component);U.contextType=C;var T=U,q=function(e){var t=e.name,a=e.handleChange,n=e.hint;return r.a.createElement("div",{className:"uk-margin"},r.a.createElement("label",{className:"uk-form-label uk-text-capitalize",htmlFor:t},t," ",n&&"(".concat(n,")"),":"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("textarea",{onChange:a,className:"uk-textarea",name:t,id:t,cols:"30",rows:"5"})))},z=function(e){var t=e.handleSubmit,a=e.handleChange,n=e.handleImagesChange,l=e.property,c=l.description&&l.description.length||0;return r.a.createElement("div",null,r.a.createElement("form",{className:"uk-width-1-1",onSubmit:t},r.a.createElement(A,{name:"title",placeholder:"property name",handleChange:a}),r.a.createElement(A,{name:"price",placeholder:"price per night",handleChange:a}),r.a.createElement(A,{name:"address",placeholder:"property address",handleChange:a}),r.a.createElement(A,{name:"capacity",placeholder:"property capacity",handleChange:a}),r.a.createElement(q,{name:"description",hint:"".concat(c,"/50"),handleChange:a}),r.a.createElement(q,{name:"images",handleChange:n,hint:"separate multiple images by commas"}),r.a.createElement("button",{type:"submit",className:"uk-button uk-button-primary"},"Create property")))},B=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={property:{}},e.handleChange=function(t){var a=e.state.property;a=Object(o.a)({},a,Object(v.a)({},t.target.name,t.target.value)),e.setState({property:a})},e.handleImagesChange=function(t){var a=e.state.property;a=Object(o.a)({},a,Object(v.a)({},t.target.name,t.target.value.split(","))),e.setState({property:a})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.property,n=e.context.addProperty,r=e.props.history;L(a).then((function(e){var t=e.data.result;n(t),r.push("/")})).catch((function(e){Object.values(e.response.data.errors).map((function(e){return N.a.notification({message:"<span uk-icon='icon: close'></span> ".concat(e.message),status:"danger",pos:"top-right"})}))}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.property;return r.a.createElement("section",{className:"uk-section"},r.a.createElement("div",{className:"uk-container"},r.a.createElement("h3",null,"Create property"),r.a.createElement("div",{className:"uk-grid uk-child-width-1-2"},r.a.createElement(z,{property:e,handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleImagesChange:this.handleImagesChange}),r.a.createElement("div",null,r.a.createElement(J,Object.assign({},e,{isDemo:!0}))))))}}]),a}(n.Component);B.contextType=C;var R=B,W=function(){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:T}),r.a.createElement(h.a,{exact:!0,path:"/login",component:x}),r.a.createElement(h.a,{exact:!0,path:"/signup",component:x}),r.a.createElement(h.a,{exact:!0,path:"/property/new",component:R}),r.a.createElement(h.a,{exact:!0,path:"/property/:id",component:function(){return r.a.createElement("h1",null,"detailt")}}))},G=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:JSON.parse(localStorage.getItem("user"))||{},properties:[]},e.setUser=function(t){e.setState({user:t})},e.setProperties=function(t){e.setState({properties:t})},e.addProperty=function(t){var a=e.state.properties;a=Object(o.a)({property:t},a),e.setState({properties:a})},e.logout=function(){var t=e.props.history;f().then((function(){localStorage.removeItem("user"),e.setState({user:{}}),t.push("/login")}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=this.setUser,a=this.logout,n=this.setProperties,l=this.addProperty;return r.a.createElement(C.Provider,{value:{state:e,setUser:t,logout:a,setProperties:n,addProperty:l}},r.a.createElement("div",{className:"App"},r.a.createElement(p,{user:e.user,logout:a}),r.a.createElement(W,null)))}}]),a}(n.Component),M=Object(h.f)(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(35),H=a.n($);a(67);N.a.use(H.a);var K=function(){return r.a.createElement(d.a,null,r.a.createElement(M,null))};c.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.3d841073.chunk.js.map